<tal:content tal:define="navigation_root_url view/navigation_root_url;
                         header_config context/@@genweb.utils/genwebHeaderConfig;
                         languages view/languages;
                         render_globalnav python:view.render_globalnav()">

<div id="header" tal:attributes="class view/getClass">

    <div id="portal-logos" class="d-flex me-4" tal:define="logos view/getLogosHeader">
        <div id="logo-primary">

            <a tal:condition="logos/logo_url"
               tal:attributes="href logos/logo_url;
                               target logos/logo_target;">

                <img alt="" title="" class="img-desktop"
                     tal:attributes="src logos/logo;
                                     alt logos/logo_alt;
                                     title logos/logo_alt;">

                <img alt="" title="" class="img-responsive"
                     tal:attributes="src logos/logo_responsive;
                                     alt logos/logo_alt;
                                     title logos/logo_alt;">

            </a>

            <tal:condition condition="not:logos/logo_url">

                <img alt="" title="" class="img-desktop"
                     tal:attributes="src logos/logo;
                                     alt logos/logo_alt;
                                     title logos/logo_alt;">

                <img alt="" title="" class="img-responsive"
                     tal:attributes="src logos/logo_responsive;
                                     alt logos/logo_alt;
                                     title logos/logo_alt;">

            </tal:condition>

        </div>

        <div id="logo-secundary" class="ms-2" tal:condition="logos/secundary_logo">

            <a tal:condition="logos/secundary_logo_url"
               tal:attributes="href logos/secundary_logo_url;
                               target logos/secundary_logo_target;">

                <img alt="" title="" class="img-desktop"
                     tal:attributes="src logos/secundary_logo;
                                     alt logos/secundary_logo_alt;
                                     title logos/secundary_logo_alt;">

                <img alt="" title="" class="img-responsive"
                     tal:attributes="src logos/secundary_logo_responsive;
                                     alt logos/secundary_logo_alt;
                                     title logos/secundary_logo_alt;">

            </a>

            <tal:condition condition="not:logos/secundary_logo_url">

                <img alt="" title="" class="img-desktop"
                     tal:attributes="src logos/secundary_logo;
                                     alt logos/secundary_logo_alt;
                                     title logos/secundary_logo_alt;">

                <img alt="" title="" class="img-responsive"
                     tal:attributes="src logos/secundary_logo_responsive;
                                     alt logos/secundary_logo_alt;
                                     title logos/secundary_logo_alt;">

            </tal:condition>
        </div>
    </div>

    <nav id="portal-navbar" role="navigation" class="global-navigation ms-auto">

        <ul class="navbar-nav mb-2 mb-lg-0 align-items-center" id="portal-globalnav">
            <li class="home nav-item">
                <a class="state-visible nav-link" tal:attributes="href navigation_root_url"
                   i18n:domain="genweb" i18n:translate="">
                   Inici
                </a>
            </li>

            <navtree tal:condition="not:header_config/treu_menu_horitzontal"
                     tal:replace="structure render_globalnav" />


            <tal:block tal:condition="python:view.user_actions and view.anonymous">

                <li class="nav-item nav-action" tal:repeat="action view/user_actions">

                    <a href=""
                       tal:attributes="action">

                       <i tal:condition="action/icon"
                          i18n:attributes="title action/title;
                                           alt action/title"
                          tal:attributes="class action/icon;"></i>
                    </a>

                </li>

            </tal:block>

            <tal:languages tal:condition="languages/has_selector">

                <tal:selector tal:condition="languages/selected">

                   <li class="has_subtree nav-item nav-lang" tal:define="selected languages/selected">
                        <a href="#" class="nav-link" aria-haspopup="true">
                            <i class="bi bi-globe"></i>
                        </a>

                        <ul class="has_subtree dropdown" tal:define="langs languages/others">
                            <li tal:repeat="lang langs" class="nav-item">
                                <a class="nav-link" tal:attributes="href lang/url">
                                    <span tal:content="lang/native"></span>
                                </a>
                            </li>
                        </ul>
                    </li>

                </tal:selector>

            </tal:languages>
        </ul>
    </nav>

    <div id="portal-searchbox" class="nav-item" i18n:domain="plone">

        <block tal:define="id_searchBox string:"
               metal:use-macro="context/macros-genweb-searchBox/search"></block>

    </div>

    <div id="portal-navbar-mobile" class="d-none ms-auto" role="navigation">

        <nav class="navbar navbar-dark">

            <div class="container-fluid">

                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#gwMobileNavbar" aria-controls="gwMobileNavbar">

                  <span class="navbar-toggler-icon"></span>

                </button>

                <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1"
                     id="gwMobileNavbar" aria-labelledby="gwMobileNavbarLabel">

                    <div class="offcanvas-header">

                        <h5 i18n:translate="">Men√∫</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>

                    </div>

                    <div class="offcanvas-body">

                        <div class="d-flex mt-3 mb-2" role="search">

                            <div id="portal-searchbox-mobile" class="nav-item" i18n:domain="plone">

                                <block tal:define="id_searchBox string:_mobile"
                                       metal:use-macro="context/macros-genweb-searchBox/search"></block>

                            </div>

                        </div>

                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">

                            <li class="nav-item">

                                <a class="nav-link" tal:attributes="href navigation_root_url"
                                   i18n:domain="genweb" i18n:translate="">
                                    Inici
                                </a>

                            </li>

                            <li class="ps-3"><hr class="mt-1 mb-1"></li>

                            <navtree tal:condition="not:header_config/treu_menu_horitzontal"
                                     tal:replace="structure render_globalnav" />

                            <tal:block tal:condition="python:view.user_actions and view.anonymous">

                                <li class="ps-3"><hr class="mt-1 mb-1"></li>

                                <li class="nav-item" tal:repeat="action view/user_actions">

                                    <a href=""
                                       tal:attributes="title action/title;
                                                       href action/href;
                                                       id action/id">

                                        <span tal:content="action/title"
                                              i18n:translate="">
                                            action title
                                        </span>
                                    </a>

                                </li>

                            </tal:block>

                            <li class="ps-3"><hr class="mt-1 mb-1"></li>

                            <tal:languages tal:condition="languages/has_selector">

                                <tal:multiplelangs tal:condition="languages/multiple_selector"
                                                   tal:define="langs languages/others">


                                    <li tal:repeat="lang langs" class="nav-item">

                                        <a class="nav-link" tal:attributes="href lang/url">

                                            <span tal:content="lang/native"></span>

                                        </a>

                                    </li>

                                </tal:multiplelangs>

                            </tal:languages>

                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>

</tal:content>
