<tal:block repeat="portlet options/portlets">
<div class="portletWrapper"
    tal:attributes="id string:portletwrapper-${portlet/hash};
                     data-portlethash portlet/hash"
     tal:content="structure python:view.safe_render(portlet['renderer'])" />
</tal:block>

<tal:block tal:define="checkPermission nocall:context/portal_membership/checkPermission;" tal:condition="python:checkPermission('Portlets: Manage portlets', context)">
    <div class="managePortletsLink"
          i18n:domain="plone">
      <a title="View portlet management screen"
         i18n:attributes="title"
         i18n:translate="manage_portlets_link"
         tal:attributes="href string:${view/base_url}/@@manage-portlets"
         >Manage portlets</a>
    </div>
</tal:block>