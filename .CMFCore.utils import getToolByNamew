[1mdiff --git a/src/genweb6/core/browser/viewlets.py b/src/genweb6/core/browser/viewlets.py[m
[1mindex 8eb58fe..e8bb404 100644[m
[1m--- a/src/genweb6/core/browser/viewlets.py[m
[1m+++ b/src/genweb6/core/browser/viewlets.py[m
[36m@@ -65,6 +65,9 @@[m [mclass loginViewlet(viewletBase, LoginUtils):[m
 [m
 class headerViewlet(loginViewlet, SearchBoxViewlet, GlobalSectionsViewlet):[m
 [m
[32m+[m[32m    def update(self):[m
[32m+[m[32m        self.lt = api.portal.get_tool(name='portal_languages')[m
[32m+[m
     def getLogosHeader(self):[m
         header_config = genwebHeaderConfig()[m
         portal_url = self.root_url()[m
[36m@@ -110,6 +113,49 @@[m [mclass headerViewlet(loginViewlet, SearchBoxViewlet, GlobalSectionsViewlet):[m
             return getSecurityManager().checkPermission("Add portal member", self.context)[m
         return False[m
 [m
[32m+[m[32m    def available(self):[m
[32m+[m[32m        if self.lt is None:[m
[32m+[m[32m            return False[m
[32m+[m
[32m+[m[32m        selector = self.lt.showSelector()[m
[32m+[m[32m        languages = len(self.lt.getSupportedLanguages()) > 1[m
[32m+[m
[32m+[m[32m        return selector and languages[m
[32m+[m
[32m+[m[32m    def languages(self):[m
[32m+[m[32m        if self.lt is None:[m
[32m+[m[32m            return [][m
[32m+[m
[32m+[m[32m        bound = self.lt.getLanguageBindings(self.request)[m
[32m+[m[32m        current = bound[0][m
[32m+[m
[32m+[m[32m        def merge(lang, info):[m
[32m+[m[32m            info["code"] = lang[m
[32m+[m[32m            info["selected"] = lang == current[m
[32m+[m[32m            return info[m
[32m+[m
[32m+[m[32m        languages = [[m
[32m+[m[32m            merge(lang, info)[m
[32m+[m[32m            for (lang, info) in self.lt.getAvailableLanguageInformation().items()[m
[32m+[m[32m            if info["selected"][m
[32m+[m[32m        ][m
[32m+[m
[32m+[m[32m        supported_langs = self.lt.getSupportedLanguages()[m
[32m+[m
[32m+[m[32m        def index(info):[m
[32m+[m[32m            try:[m
[32m+[m[32m                return supported_langs.index(info["code"])[m
[32m+[m[32m            except ValueError:[m
[32m+[m[32m                return len(supported_langs)[m
[32m+[m
[32m+[m[32m        return sorted(languages, key=index)[m
[32m+[m
[32m+[m[32m    def showFlags(self):[m
[32m+[m[32m        if self.lt is None:[m
[32m+[m[32m            return False[m
[32m+[m
[32m+[m[32m        return self.lt.showFlags[m
[32m+[m
 [m
 class logosFooterViewlet(viewletBase):[m
 [m
[1mdiff --git a/src/genweb6/core/browser/viewlets_templates/header/header.pt b/src/genweb6/core/browser/viewlets_templates/header/header.pt[m
[1mindex ce9b525..b34333c 100644[m
[1m--- a/src/genweb6/core/browser/viewlets_templates/header/header.pt[m
[1m+++ b/src/genweb6/core/browser/viewlets_templates/header/header.pt[m
[36m@@ -99,6 +99,40 @@[m
         </ul>[m
     </nav>[m
 [m
[32m+[m[32m    <tal:language >[m
[32m+[m
[32m+[m[32m        <ul id="portal-languageselector"[m
[32m+[m[32m            tal:define="showFlags view/showFlags;[m
[32m+[m[32m                        languages view/languages;[m
[32m+[m[32m                        here_url context/@@plone_context_state/view_url;[m
[32m+[m[32m                        portal_url view/portal_url;[m
[32m+[m[32m                        icons python:context.restrictedTraverse('@@iconresolver');">[m
[32m+[m
[32m+[m[32m            <tal:language repeat="lang languages">[m
[32m+[m
[32m+[m[32m                <li tal:define="code lang/code;[m
[32m+[m[32m                                selected lang/selected;[m
[32m+[m[32m                                codeclass string:language-${code};[m
[32m+[m[32m                                current python: selected and 'currentLanguage ' or '';"[m
[32m+[m[32m                    tal:attributes="class string:${current}${codeclass}">[m
[32m+[m
[32m+[m[32m                    <a href="" tal:define="flag lang/flag|nothing;[m
[32m+[m[32m                                           name lang/native|lang/name;[m
[32m+[m[32m                                           showflag python:showFlags and flag;"[m
[32m+[m[32m                       tal:attributes="href string:${here_url}?set_language=${code};[m
[32m+[m[32m                                       title name">[m
[32m+[m
[32m+[m[32m                        <tal:flag condition="showflag">[m
[32m+[m[32m                            <img tal:replace="structure python:icons.tag(flag, tag_class='plone-icon-flag')" />[m
[32m+[m[32m                        </tal:flag>[m
[32m+[m
[32m+[m[32m                        <tal:nonflag condition="not: showflag" replace="name">language name</tal:nonflag>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m            </tal:language>[m
[32m+[m[32m        </ul>[m
[32m+[m[32m    </tal:language>[m
[32m+[m
     <div id="portal-searchbox" class="nav-item" i18n:domain="plone">[m
 [m
         <form id="searchGadget_form" action="@@search" role="search"[m
[36m@@ -127,7 +161,6 @@[m
                    i18n:translate="label_advanced_search">[m
                     Advanced Search&hellip;[m
                 </a>[m
[31m-[m
             </div>[m
         </form>[m
     </div>[m
